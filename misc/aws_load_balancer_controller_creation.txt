Deployment Steps
According to the AWS documentation, follow the steps below:

Run the following command to download the required IAM policy file:

curl -O https://raw.githubusercontent.com/kubernetes-sigs/aws-load-balancer-controller/v2.4.7/docs/install/iam_policy.json        

Create an IAM policy named "AWSLoadBalancerControllerIAMPolicy" using the downloaded policy document in your AWS region (e.g., eu-west-3):

aws iam create-policy --policy-name AWSLoadBalancerControllerIAMPolicy --policy-document file://iam_policy.json --region eu-west-3        

Associate the IAM OIDC provider with your EKS cluster in your AWS region (e.g., eu-west-3):

eksctl utils associate-iam-oidc-provider --region=eu-west-3 --cluster=aws-eks-cluster1 --approve        

Create an IAM service account for the "aws-load-balancer-controller" in the "kube-system" namespace of your EKS cluster (e.g., aws-eks-cluster1) in your AWS region (e.g., eu-west-3). Use the appropriate AWS account ID and IAM policy ARN:

eksctl create iamserviceaccount --cluster=aws-eks-cluster1 --namespace=kube-system --region eu-west-3 --name=aws-load-balancer-controller --role-name AmazonEKSLoadBalancerControllerRole --attach-policy-arn=arn:aws:iam::YOUR_AWS_ACCOUNT_ID:policy/AWSLoadBalancerControllerIAMPolicy --approve
Important: Ensure that you modify "782482296161" with your AWS account ID, replace "eu-west-3" with the appropriate AWS region, and substitute "aws-eks-cluster1" with the respective name of your AWS cluster.

       

Apply the Cert Manager YAML file for installation:

kubectl apply --validate=false -f https://github.com/jetstack/cert-manager/releases/download/v1.5.4/cert-manager.yaml        

Download the YAML file for the AWS Load Balancer Controller from the following URL:



Download YAML File        

Remove the specified code block from the downloaded YAML file:



apiVersion: v1
kind: ServiceAccount
metadata:
  labels:
    app.kubernetes.io/component: controller
    app.kubernetes.io/name: aws-load-balancer-controller
  name: aws-load-balancer-controller
  namespace: kube-system
        
Edit the "Deployment" section in the YAML file by changing the following parameters:



spec:
      containers:
        - args:
            - --cluster-name=your-cluster-name
            - --ingress-class=alb
            - --aws-vpc-id=vpc-xxxxxxxx
            - --aws-region=region-code
        
Replace the image name with:

codedecode25/aws-load-balancer:v2.4.7        

Apply the edited YAML file:

kubectl apply -f v2_4_7_full.yaml
