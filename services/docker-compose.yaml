services:
  eurekafd:
    image: tusharvyavahare/eureka-server:latest
    build: .\eureka
    ports:
      - "8761:8761"
    healthcheck:
      test: ["CMD-SHELL", "wget -qO- http://localhost:8761/actuator/health | grep UP"]
      interval: 10s
      timeout: 5s
      retries: 3

  foodcataloguefd:
    image: tusharvyavahare/foodcatalogue-service:latest
    build: .\foodcatalogue
    ports:
      - "9092:9092"
    environment:
      DB_PWD: ${DB_PWD}
    depends_on:
      eurekafd:
        condition: service_healthy

  orderfd:
    image: tusharvyavahare/order-service:latest
    build: .\order-service
    ports:
      - "9094:9094"
    depends_on:
      eurekafd:
        condition: service_healthy

  restaurantlistingfd:
    image: tusharvyavahare/restaurantlisting-service:latest
    build: .\restaurantlisting
    ports:
      - "9091:9091"
    environment:
      DB_PWD: ${DB_PWD}
    depends_on:
      eurekafd:
        condition: service_healthy

  userinfofd:
    image: tusharvyavahare/userinfo-service:latest
    build: .\userinfo
    ports:
      - "9093:9093"
    environment:
      DB_PWD: ${DB_PWD}
    depends_on:
      eurekafd:
        condition: service_healthy
